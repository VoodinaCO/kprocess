<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:k="http://schemas.kprocess.com/xaml/framework"
                    xmlns:local="clr-namespace:KProcess.Ksmed.Presentation.Core.Controls"
                    xmlns:converters="clr-namespace:KProcess.Ksmed.Presentation.Core.Converters"
                    xmlns:hdc="clr-namespace:DlhSoft.Windows.Controls;assembly=DlhSoft.HierarchicalData.LightWPF.Controls"
                    xmlns:pdgcc="clr-namespace:DlhSoft.Windows.Controls;assembly=DlhSoft.ProjectData.GanttChart.LightWPF.Controls"
                    xmlns:shapes="clr-namespace:DlhSoft.Windows.Shapes;assembly=DlhSoft.ProjectData.GanttChart.LightWPF.Controls"
                    xmlns:pdgcconverters="clr-namespace:DlhSoft.Windows.Converters;assembly=DlhSoft.ProjectData.GanttChart.LightWPF.Controls"
                    xmlns:behaviors="clr-namespace:KProcess.Ksmed.Presentation.Core.Behaviors"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    mc:Ignorable="d"
                    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity">

    <!-- Styles par défaut, insensibles au thème -->

    <Color x:Key="ControlMouseOverColor">#FF3843C4</Color>
    <Color x:Key="ControlPressedColor">#FF211AA9</Color>
    <Color x:Key="BorderLightColor">#FF888888</Color>
    <Color x:Key="BorderDarkColor">#FF444444</Color>
    <Color x:Key="GlyphColor">#FF444444</Color>

    <LinearGradientBrush x:Key="SummaryFillBrush" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#FFCECECE" Offset="0.204" />
        <GradientStop Color="#FFAFAFAF" Offset="0.864" />
    </LinearGradientBrush>

    <SolidColorBrush x:Key="SummaryStrokeBrush" Color="#FF686868" />

    <!-- Styles pour le gantt -->
    <DataTemplate x:Key="ScaleHeaderContentTemplate">
        <TextBlock Text="{Binding .}"
               HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2"
               ToolTip="{Binding DataContext.HeaderTooltip, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentControl}}}" />
    </DataTemplate>

    <converters:OriginalGainMultiConverter x:Key="OriginalGainMultiConverter" />
    <converters:OriginalGainVisibilityMultiConverter x:Key="OriginalGainVisibilityMultiConverter" />

    <DataTemplate x:Key="StandardTaskTemplate">
        <DataTemplate.Resources>
            <Style x:Key="CriticalRectangleStyle" TargetType="{x:Type Rectangle}">
                <Setter Property="Stroke" Value="{Binding StrokeBrush}" />
                <Setter Property="StrokeThickness" Value="{Binding GanttChartView.StandardBarStrokeThickness}" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsCritical}" Value="True">
                        <Setter Property="Stroke" Value="Red" />
                        <Setter Property="StrokeThickness" Value="2" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataTemplate.Resources>
        <Grid x:Name="taskTemplateRoot">
            <Grid>
                <Rectangle Fill="{Binding FillBrush}"
                   Style="{StaticResource CriticalRectangleStyle}" />

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Rectangle Width="6" Fill="{StaticResource ControlBackgroundNormalOrange}"
                     Style="{StaticResource CriticalRectangleStyle}"
                     Visibility="{Binding OrangeHeaderVisibility}"
                     ToolTip="{Binding OrangeHeaderToolTip}" />
                    <Rectangle Width="6" Fill="{StaticResource ControlBackgroundNormalGreen}"
                     Style="{StaticResource CriticalRectangleStyle}"
                     Visibility="{Binding GreenHeaderVisibility}"
                     ToolTip="{Binding GreenHeaderToolTip}" />
                </StackPanel>

                <Rectangle Fill="{Binding GanttChartView.StandardCompletedBarFill}"
                   Stroke="{Binding GanttChartView.StandardCompletedBarStroke}"
                   StrokeThickness="{Binding GanttChartView.StandardCompletedBarStrokeThickness}"
                   Margin="1,4" RadiusX="2" RadiusY="2" VerticalAlignment="Stretch" HorizontalAlignment="Left" Opacity=".9">
                    <Rectangle.Visibility>
                        <MultiBinding Converter="{StaticResource OriginalGainVisibilityMultiConverter}">
                            <Binding Path="OriginalGainVisibility" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type local:KGanttChartView}}" />
                            <Binding Path="OriginalGainPercentage" />
                        </MultiBinding>
                    </Rectangle.Visibility>
                    <Rectangle.Width>
                        <MultiBinding Converter="{StaticResource OriginalGainMultiConverter}">
                            <Binding Path="OriginalGainPercentage" />
                            <Binding Path="ActualWidth" ElementName="taskTemplateRoot" />
                        </MultiBinding>
                    </Rectangle.Width>
                </Rectangle>


                <Border Margin="-20,0,-20,0" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Border Background="#88FFFFFF" VerticalAlignment="Center" HorizontalAlignment="Center" Padding="1,0">
                        <TextBlock Text="{Binding OriginalGainPercentage, StringFormat=\{0:0\} %}"  FontSize="10" FontWeight="Bold"
                    Foreground="Black">
                            <TextBlock.Effect>
                                <DropShadowEffect BlurRadius="3" Color="White" Opacity="1" ShadowDepth="0" />
                            </TextBlock.Effect>
                        </TextBlock>
                    </Border>
                    <Border.Visibility>
                        <MultiBinding Converter="{StaticResource OriginalGainVisibilityMultiConverter}">
                            <Binding Path="OriginalGainVisibility" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type local:KGanttChartView}}" />
                            <Binding Path="OriginalGainPercentage" />
                        </MultiBinding>
                    </Border.Visibility>
                </Border>

                <pdgcc:DragTaskThumb Role="UpdateStart" Visibility="{Binding GanttChartView.ThumbVisibility}" />
                <pdgcc:DragTaskThumb Role="UpdateFinish" Width="7" HorizontalAlignment="Right"
                             Visibility="{Binding GanttChartView.ThumbVisibility}" IsEnabled="{Binding CanResize}" />
            </Grid>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="SummaryTaskTemplate">
        <Grid d:DesignWidth="144.667" d:DesignHeight="60.667">
            <Grid x:Name="summaryTemplateRoot">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.1*" />
                    <RowDefinition Height="0.6*" />
                    <RowDefinition Height="0.3*" />
                </Grid.RowDefinitions>
                <Rectangle Grid.Column="1" Grid.Row="1" Fill="{Binding Path=(pdgcc:GanttChartView.SummaryBarFill)}"
                   Stroke="{Binding Path=(pdgcc:GanttChartView.SummaryBarStroke)}"
                   StrokeThickness="{Binding GanttChartView.SummaryBarStrokeThickness}" />
                <Line Grid.Column="1" Grid.Row="2" Stroke="{Binding Path=(pdgcc:GanttChartView.StandardBarStroke)}"
              StrokeThickness="1" StrokeDashArray="1,1" Y1="1" Y2="1" X1="0" X2="{Binding ComputedBarWidth}"
              Visibility="{Binding ExpansionVisibility}" />
                <Polygon Grid.Column="0" Grid.Row="1" Grid.RowSpan="2" Fill="{Binding Path=(pdgcc:GanttChartView.SummaryBarFill)}"
                 Stroke="{Binding Path=(pdgcc:GanttChartView.SummaryBarStroke)}"
                 StrokeThickness="{Binding GanttChartView.SummaryBarStrokeThickness}"
                 Width="{Binding GanttChartView.BarHeight}"
                 Stretch="Fill"
                 Points="0,0 0,0.5 0.5,0.8 1,0.5 1,0" />

                <Polygon Grid.Column="3" Grid.Row="1" Grid.RowSpan="2" Fill="{Binding Path=(pdgcc:GanttChartView.SummaryBarFill)}"
                 Stroke="{Binding Path=(pdgcc:GanttChartView.SummaryBarStroke)}"
                 StrokeThickness="{Binding GanttChartView.SummaryBarStrokeThickness}" Width="{Binding GanttChartView.BarHeight}"
                 Stretch="Fill"
                 Points="1,0 1,0.5 0.5,0.8 0,0.5 0,0" />

                <Rectangle Grid.Row="1" Grid.ColumnSpan="3"
                   Fill="{Binding GanttChartView.StandardCompletedBarFill}"
                   Stroke="{Binding GanttChartView.StandardCompletedBarStroke}"
                   StrokeThickness="{Binding GanttChartView.StandardCompletedBarStrokeThickness}"
                   Visibility="{k:AncestorBinding OriginalGainVisibility, {x:Type local:KGanttChartView}, TargetNullValue=Collapsed}"
                   Margin="1,4" RadiusX="2" RadiusY="2" VerticalAlignment="Stretch" HorizontalAlignment="Left" Opacity=".9">
                    <Rectangle.Width>
                        <MultiBinding Converter="{StaticResource OriginalGainMultiConverter}">
                            <Binding Path="OriginalGainPercentage" />
                            <Binding Path="ActualWidth" ElementName="summaryTemplateRoot" />
                        </MultiBinding>
                    </Rectangle.Width>
                </Rectangle>

                <TextBlock Grid.ColumnSpan="3" Grid.RowSpan="2"
                   Text="{Binding OriginalGainPercentage, StringFormat=\{0:0\} %}"
                   Visibility="{k:AncestorBinding OriginalGainVisibility, {x:Type local:KGanttChartView}}"
                   VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White">
                    <TextBlock.Effect>
                        <DropShadowEffect BlurRadius="4" Color="Black" Opacity="1" ShadowDepth="0" />
                    </TextBlock.Effect>
                </TextBlock>

            </Grid>
            <pdgcc:TaskExpander />
        </Grid>
    </DataTemplate>

    <ControlTemplate x:Key="UpdateTimelinePageButtonTemplate" TargetType="{x:Type Button}">
        <Border x:Name="Border" Margin="0,1,1,1" CornerRadius="1" BorderThickness="1">
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <LinearGradientBrush.GradientStops>
                        <GradientStopCollection>
                            <GradientStop Color="{DynamicResource BorderLightColor}" Offset="0.0" />
                            <GradientStop Color="{DynamicResource BorderDarkColor}" Offset="1.0" />
                        </GradientStopCollection>
                    </LinearGradientBrush.GradientStops>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,0" StartPoint="0.5,1">
                    <GradientStop Color="{DynamicResource ControlLightColor}" Offset="0" />
                    <GradientStop Color="{DynamicResource ControlMediumColor}" Offset="1" />
                </LinearGradientBrush>
            </Border.Background>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="MouseOver">
                        <Storyboard>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[0].(GradientStop.Color)" Storyboard.TargetName="Border">
                                <EasingColorKeyFrame KeyTime="0" Value="{StaticResource ControlMouseOverColor}" />
                            </ColorAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[0].(GradientStop.Color)" Storyboard.TargetName="Border">
                                <EasingColorKeyFrame KeyTime="0" Value="{StaticResource ControlPressedColor}" />
                            </ColorAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Path x:Name="Arrow" HorizontalAlignment="Center" VerticalAlignment="Center" Data="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}">
                <Path.Fill>
                    <SolidColorBrush Color="{DynamicResource GlyphColor}" />
                </Path.Fill>
            </Path>
        </Border>
    </ControlTemplate>

    <Style TargetType="{x:Type hdc:DataTreeGrid}" x:Key="baseDataTreeGridStyle" BasedOn="{StaticResource baseDataGridStyle}">
        <Setter Property="IsAsyncPresentationEnabled" Value="False" />
        <Setter Property="ExpanderTemplate">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Width="16" Height="16" Background="#00FFFFFF" Padding="5,5,5,5">
                        <Path Name="ExpandPath" Fill="#00FFFFFF" Stroke="#FF989898"
                  Data="M 0 0 L 0 6 L 6 0 Z">
                            <Path.RenderTransform>
                                <RotateTransform CenterX="3" CenterY="3" Angle="3" />
                            </Path.RenderTransform>
                        </Path>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter TargetName="ExpandPath" Property="Stroke" Value="#FF1BBBFA" />
                            <Setter TargetName="ExpandPath" Property="Fill" Value="#00FFFFFF" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="ExpandPath" Property="RenderTransform">
                                <Setter.Value>
                                    <RotateTransform CenterX="3" CenterY="3" Angle="180" />
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="ExpandPath" Property="Fill" Value="#FF595959" />
                            <Setter TargetName="ExpandPath" Property="Stroke" Value="#FF262626" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:KGanttChartView}" x:Key="baseGanttChartViewStyle">
        <Setter Property="DisableParentTimingCoercion" Value="true" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="Background" Value="#FFFFFFFF" />
        <Setter Property="Foreground" Value="#FF000000" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Top" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0" />
                    <GradientStop Color="#FF8399A9" Offset="0.375" />
                    <GradientStop Color="#FF718597" Offset="0.375" />
                    <GradientStop Color="#FF617584" Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="HeaderHeight" Value="25" />
        <Setter Property="HeaderBackground" Value="{StaticResource DataGridHeaderBrush}" />
        <Setter Property="ScaleHeaderHeight" Value="20" />
        <Setter Property="NonworkingTimeBackground" Value="#f8f8f8" />
        <Setter Property="CurrentTimeLineStroke" Value="#808080" />
        <Setter Property="ItemHeight" Value="24" />
        <Setter Property="BarHeight" Value="17" />
        <Setter Property="CompletedBarHeight" Value="4" />
        <Setter Property="StandardBarFill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="Transparent" Offset="0" />
                    <GradientStop Color="LightBlue" Offset="0.25" />
                    <GradientStop Color="Blue" Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="StandardBarStroke" Value="Blue" />
        <Setter Property="StandardBarStrokeThickness" Value="1" />
        <Setter Property="StandardBarCornerRadius" Value="4" />
        <Setter Property="StandardCompletedBarFill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="Transparent" Offset="0" />
                    <GradientStop Color="White" Offset="0.15" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="StandardCompletedBarStroke" Value="Black" />
        <Setter Property="StandardCompletedBarStrokeThickness" Value="0" />
        <Setter Property="StandardCompletedBarCornerRadius" Value="2" />
        <Setter Property="SummaryBarFill" Value="{StaticResource SummaryFillBrush}" />
        <Setter Property="SummaryBarStroke" Value="{StaticResource SummaryStrokeBrush}" />
        <Setter Property="SummaryBarStrokeThickness" Value="1" />
        <Setter Property="MilestoneBarFill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="Black" Offset="0" />
                    <GradientStop Color="Transparent" Offset="0.1" />
                    <GradientStop Color="Gray" Offset="0.2" />
                    <GradientStop Color="Black" Offset="0.6" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="MilestoneBarStroke" Value="Black" />
        <Setter Property="MilestoneBarStrokeThickness" Value="1" />
        <Setter Property="DependencyLineStroke" Value="Blue" />
        <Setter Property="DependencyLineStrokeThickness" Value="1" />
        <Setter Property="StandardTaskTemplate" Value="{StaticResource StandardTaskTemplate}" />
        <Setter Property="SummaryTaskTemplate" Value="{StaticResource SummaryTaskTemplate}" />
        <Setter Property="MilestoneTaskTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        <Polygon Fill="{Binding (pdgcc:GanttChartView.MilestoneBarFill)}" Stroke="{Binding (pdgcc:GanttChartView.MilestoneBarStroke)}" StrokeThickness="{Binding GanttChartView.MilestoneBarStrokeThickness}" Stretch="UniformToFill"
                     Points="0.5,0 1,0.5 0.5,1 0,0.5" />
                        <pdgcc:DragTaskThumb Role="UpdateStart" Visibility="{Binding GanttChartView.ThumbVisibility}" />
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ToolTipTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel>
                        <ContentControl Content="{Binding LabelOrWBS}" IsTabStop="False" />
                        <Image Source="{Binding Action.Thumbnail.Uri}"
                               Stretch="Uniform"
                               MaxWidth="{Binding Converter={converters:ImageResizerConverter}}"
                               MaxHeight="{Binding Converter={converters:ImageResizerConverter}}"/>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="DependencyLineTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        <ToolTipService.ToolTip>
                            <ToolTip Content="{Binding}" ContentTemplate="{Binding GanttChartView.PredecessorToolTipTemplate}" Visibility="{Binding GanttChartView.DependencyToolTipVisibility}" />
                        </ToolTipService.ToolTip>
                        <shapes:DependencyArrowLine Stroke="Transparent" StrokeThickness="3" Points="{Binding ComputedDependencyLinePoints}" />
                        <shapes:DependencyArrowLine Stroke="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=pdgcc:GanttChartView}, Path=(pdgcc:GanttChartView.DependencyLineStroke)}" StrokeThickness="{Binding GanttChartView.DependencyLineStrokeThickness}" Points="{Binding ComputedDependencyLinePoints}" />
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="PredecessorToolTipTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <ContentControl Content="{Binding Item.Content}" VerticalAlignment="Center" IsTabStop="False" />
                        <TextBlock Text="-" Margin="1,0" VerticalAlignment="Center" />
                        <ContentControl Content="{Binding DependentItem.Content}" VerticalAlignment="Center" IsTabStop="False" />
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <pdgcc:TaskPresenter IsVirtuallyVisible="{Binding IsVirtuallyVisible}" ChartDependencyCreationThumbVisibility="{Binding GanttChartView.DependencyCreationThumbVisibility}" DependencyCreationThumbVisibility="{Binding DependencyCreationThumbVisibility}" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <Canvas IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
        <Setter Property="UpdateScaleInterval" Value="00:15:00" />
        <Setter Property="TimelineFill" Value="Red" />
        <Setter Property="Scales">
            <Setter.Value>
                <pdgcc:ScaleCollection>
                    <local:ZoomableScale HeaderBorderBrush="Silver" HeaderBorderThickness="0,0,1,0"
                                HeaderContentFormat="Custom" HeaderContentTemplate="{StaticResource ScaleHeaderContentTemplate}" />
                </pdgcc:ScaleCollection>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:KGanttChartView}">
                    <Grid>
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer x:Name="ScrollViewer" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" HorizontalScrollBarVisibility="Visible" pdgcc:GanttChartView.ComputedWidth="{TemplateBinding ComputedWidth}" pdgcc:GanttChartView.HeaderHeight="{TemplateBinding HeaderHeight}" pdgcc:GanttChartView.HeaderBackground="{TemplateBinding HeaderBackground}" IsTabStop="True"
                          pdgcc:GanttChartView.ComputedIncreaseTimelinePageButtonVisibility="{TemplateBinding ComputedIncreaseTimelinePageButtonVisibility}" pdgcc:GanttChartView.ComputedDecreaseTimelinePageButtonVisibility="{TemplateBinding ComputedDecreaseTimelinePageButtonVisibility}"
                          pdgcc:GanttChartView.Scales="{TemplateBinding Scales}">
                                <ScrollViewer.Template>
                                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                        <Grid Background="{TemplateBinding Background}">
                                            <DockPanel Margin="{TemplateBinding Padding}">
                                                <Grid DockPanel.Dock="Top">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <ScrollViewer x:Name="HeaderScrollViewer" Grid.Column="0" Focusable="False" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" IsTabStop="False" BorderThickness="0">
                                                        <Grid HorizontalAlignment="Left" Height="{TemplateBinding pdgcc:GanttChartView.HeaderHeight}" Background="{TemplateBinding pdgcc:GanttChartView.HeaderBackground}" TextElement.Foreground="White">
                                                            <ItemsControl ItemsSource="{TemplateBinding pdgcc:GanttChartView.Scales}" Width="{TemplateBinding pdgcc:GanttChartView.ComputedWidth}" IsTabStop="False">
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <ItemsControl ItemsSource="{Binding Intervals}" Height="{Binding HeaderHeight}" IsTabStop="False">
                                                                            <ItemsControl.ItemsPanel>
                                                                                <ItemsPanelTemplate>
                                                                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Stretch" HorizontalAlignment="Left" IsItemsHost="True" />
                                                                                </ItemsPanelTemplate>
                                                                            </ItemsControl.ItemsPanel>
                                                                            <ItemsControl.ItemTemplate>
                                                                                <DataTemplate>
                                                                                    <Border Background="{Binding Scale.HeaderBackground}" BorderBrush="{Binding Scale.HeaderBorderBrush}" BorderThickness="{Binding Scale.HeaderBorderThickness}" Width="{Binding ComputedWidth}">
                                                                                        <ContentControl Content="{Binding HeaderContent}" ContentTemplate="{Binding Scale.HeaderContentTemplate}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" IsTabStop="False" />
                                                                                    </Border>
                                                                                </DataTemplate>
                                                                            </ItemsControl.ItemTemplate>
                                                                        </ItemsControl>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                            <Canvas VerticalAlignment="Bottom" Height="10">
                                                                <Thumb x:Name="PART_TimelineThumb">
                                                                    <Thumb.Template>
                                                                        <ControlTemplate TargetType="{x:Type Thumb}">
                                                                            <Polygon Fill="{Binding TimelineFill, RelativeSource={RelativeSource AncestorType={x:Type pdgcc:GanttChartView}, Mode=FindAncestor}}"
                                             Width="16" Height="10" SnapsToDevicePixels="True" Points="0,1 15,1 7.5,10" />
                                                                        </ControlTemplate>
                                                                    </Thumb.Template>
                                                                </Thumb>

                                                                <ContentControl x:Name="PART_TimelineTime"
                                              TextElement.FontFamily="{StaticResource ContentFontFamily}"
                                              TextElement.FontSize="{StaticResource NormalFontSize}"
                                              TextElement.Foreground="{StaticResource InputSelectionForegroundBrush}"
                                              Margin="0,-10,0,0">
                                                                    <ContentControl.Template>
                                                                        <ControlTemplate TargetType="{x:Type ContentControl}">
                                                                            <Grid>
                                                                                <Border x:Name="Background" Background="{StaticResource ControlBackgroundNormalGreen}" CornerRadius="3">
                                                                                    <Border.Effect>
                                                                                        <DropShadowEffect BlurRadius="3" Direction="0" Opacity="0.1" ShadowDepth="0" />
                                                                                    </Border.Effect>
                                                                                </Border>
                                                                                <Border x:Name="TopBorder" BorderBrush="{StaticResource HighlightBrushGreen}" BorderThickness="0,1,0,0" CornerRadius="3" />
                                                                                <Border x:Name="LeftBorder" BorderThickness="1,0,0,0" CornerRadius="3">
                                                                                    <Border.BorderBrush>
                                                                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                                                            <GradientStop Color="#FFBAD700" Offset="0" />
                                                                                            <GradientStop Color="#FF94AD00" Offset="1" />
                                                                                        </LinearGradientBrush>
                                                                                    </Border.BorderBrush>
                                                                                </Border>
                                                                                <Border x:Name="Gradient" Background="{StaticResource OverlayBrush}" CornerRadius="2" Margin="1,1,0,0" />
                                                                                <ContentPresenter Effect="{StaticResource TextEffect}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="3" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                                                            </Grid>
                                                                        </ControlTemplate>
                                                                    </ContentControl.Template>
                                                                </ContentControl>

                                                            </Canvas>
                                                        </Grid>
                                                    </ScrollViewer>
                                                    <Border Grid.Column="1" Width="17" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" />
                                                </Grid>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" Grid.Row="0" Grid.Column="0" KeyboardNavigation.DirectionalNavigation="Local" />
                                                    <Rectangle Grid.Column="1" Grid.Row="1" Fill="#f0f0f0" />
                                                    <ScrollBar x:Name="PART_VerticalScrollBar" Width="17" IsTabStop="False" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Grid.Column="1" Grid.Row="0" Orientation="Vertical" ViewportSize="{TemplateBinding ViewportHeight}" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Value="{TemplateBinding VerticalOffset}" />
                                                    <Grid Height="17" Grid.Column="0" Grid.Row="1">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <ScrollBar x:Name="PART_HorizontalScrollBar" Grid.ColumnSpan="3" IsTabStop="False" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Orientation="Horizontal" ViewportSize="{TemplateBinding ViewportWidth}" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Value="{TemplateBinding HorizontalOffset}" />
                                                        <Button x:Name="DecreaseTimelinePageButton" Grid.Column="0" Width="17" Visibility="{TemplateBinding pdgcc:GanttChartView.ComputedDecreaseTimelinePageButtonVisibility}" Template="{StaticResource UpdateTimelinePageButtonTemplate}" Content="M 4 0 L 4 8 L 0 4 Z" />
                                                        <Button x:Name="IncreaseTimelinePageButton" Grid.Column="2" Width="17" Visibility="{TemplateBinding pdgcc:GanttChartView.ComputedIncreaseTimelinePageButtonVisibility}" Template="{StaticResource UpdateTimelinePageButtonTemplate}" Content="M 0 0 L 4 4 L 0 8 Z" />
                                                    </Grid>
                                                </Grid>
                                            </DockPanel>
                                        </Grid>
                                    </ControlTemplate>
                                </ScrollViewer.Template>
                                <Grid Background="{TemplateBinding WorkingTimeBackground}">
                                    <ItemsControl ItemsSource="{TemplateBinding Scales}" Width="{TemplateBinding ComputedWidth}" IsTabStop="False">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <Grid Background="Transparent" IsItemsHost="True" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <ItemsControl ItemsSource="{Binding Intervals}" IsTabStop="False">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <Grid IsItemsHost="True" />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Canvas>
                                                                <Border Background="{Binding Scale.Background}" BorderBrush="{Binding Scale.BorderBrush}" BorderThickness="{Binding Scale.BorderThickness}" Canvas.Left="{Binding ComputedLeft}" Width="{Binding ComputedWidth}" Height="{Binding GanttChartView.ActualChartHeight}" />
                                                            </Canvas>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                    <Canvas>
                                        <Rectangle x:Name="PART_TimelineLine" Height="{TemplateBinding ActualChartHeight}" Width="1"
                             Stroke="{TemplateBinding TimelineFill}" Fill="{TemplateBinding TimelineFill}" StrokeThickness="1"
                             IsHitTestVisible="False" Focusable="False" />
                                    </Canvas>
                                    <ItemsPresenter Width="{TemplateBinding ComputedWidth}" Height="{TemplateBinding ComputedHeight}" VerticalAlignment="Top" HorizontalAlignment="Left" />

                                </Grid>
                            </ScrollViewer>
                        </Border>
                        <ContentControl ContentTemplate="{StaticResource spinnerDataTemplate}" 
                            Visibility="{TemplateBinding SpinnerVisibility}"
                            Content="{k:Localize Spinner_DefaultWaitMessage}"  
                            HorizontalContentAlignment="Center" VerticalContentAlignment="Center" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:KGanttChartDataGrid}" x:Key="baseGanttChartDataGridStyle" BasedOn="{StaticResource baseDataGridStyle}">
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="UpdateScaleInterval" Value="00:00:00.1" />
        <Setter Property="AutoGenerateColumns" Value="False" />
        <Setter Property="DisableParentTimingCoercion" Value="true" />
        <Setter Property="DataGridWidth" Value=".3*" />
        <Setter Property="ChartWidth" Value=".7*" />
        <Setter Property="IsNonworkingTimeHighlighted" Value="False" />
        <Setter Property="IsCurrentTimeLineVisible" Value="False" />
        <Setter Property="AreUpdateTimelinePageButtonsVisible" Value="False" />
        <Setter Property="VisibleDayStart" Value="0:0:0" />
        <Setter Property="VisibleDayFinish" Value="24:0:0" />
        <Setter Property="WorkingDayStart" Value="0:0:0" />
        <Setter Property="WorkingDayFinish" Value="24:0:0" />
        <Setter Property="WorkingWeekStart" Value="Sunday" />
        <Setter Property="WorkingWeekFinish" Value="Saturday" />
        <Setter Property="VisibleWeekStart" Value="Sunday" />
        <Setter Property="VisibleWeekFinish" Value="Saturday" />

        <Setter Property="SplitterWidth" Value="2" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="Foreground" Value="#FF000000" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Top" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Visible" />
        <Setter Property="ColumnWidth" Value="Auto" />
        <Setter Property="HeaderHeight" Value="25" />
        <Setter Property="Columns">
            <Setter.Value>
                <pdgcc:DataGridColumnCollection>
                    <hdc:DataTreeGridColumn Header="Task" />
                    <DataGridTextColumn Header="Start" Binding="{Binding Start, Converter={StaticResource DateTimeStringConverter}, Mode=TwoWay}" />
                    <DataGridTextColumn Header="Finish" Binding="{Binding Finish, Converter={StaticResource DateTimeStringConverter}, Mode=TwoWay}" />
                    <DataGridCheckBoxColumn Header="Is milestone" Binding="{Binding IsMilestone, Mode=TwoWay}" />
                    <DataGridCheckBoxColumn Header="Is completed" Binding="{Binding IsCompleted, Mode=TwoWay}" />
                    <DataGridTextColumn Header="Assignments" Binding="{Binding AssignmentsContent, Mode=TwoWay}" />
                </pdgcc:DataGridColumnCollection>
            </Setter.Value>
        </Setter>
        <Setter Property="HeaderBackground" Value="{StaticResource DataGridHeaderBrush}" />
        <Setter Property="NonworkingTimeBackground" Value="#f8f8f8" />
        <Setter Property="CurrentTimeLineStroke" Value="#808080" />
        <Setter Property="ScaleHeaderHeight" Value="20" />
        <Setter Property="ItemHeight" Value="24" />
        <Setter Property="BarHeight" Value="17" />
        <Setter Property="CompletedBarHeight" Value="4" />
        <Setter Property="StandardBarFill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="Transparent" Offset="0" />
                    <GradientStop Color="LightBlue" Offset="0.25" />
                    <GradientStop Color="Blue" Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="StandardBarStroke" Value="Blue" />
        <Setter Property="StandardBarStrokeThickness" Value="1" />
        <Setter Property="StandardBarCornerRadius" Value="4" />
        <Setter Property="StandardCompletedBarFill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="Transparent" Offset="0" />
                    <GradientStop Color="White" Offset="0.15" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="StandardCompletedBarStroke" Value="Black" />
        <Setter Property="StandardCompletedBarStrokeThickness" Value="0" />
        <Setter Property="StandardCompletedBarCornerRadius" Value="2" />
        <Setter Property="SummaryBarFill" Value="{StaticResource SummaryFillBrush}" />
        <Setter Property="SummaryBarStroke" Value="{StaticResource SummaryStrokeBrush}" />
        <Setter Property="SummaryBarStrokeThickness" Value="1" />
        <Setter Property="MilestoneBarFill">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="Black" Offset="0" />
                    <GradientStop Color="Transparent" Offset="0.1" />
                    <GradientStop Color="Gray" Offset="0.2" />
                    <GradientStop Color="Black" Offset="0.6" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="MilestoneBarStroke" Value="Black" />
        <Setter Property="MilestoneBarStrokeThickness" Value="1" />
        <Setter Property="DependencyLineStroke" Value="Blue" />
        <Setter Property="DependencyLineStrokeThickness" Value="1" />
        <Setter Property="SummaryTaskTemplate" Value="{StaticResource SummaryTaskTemplate}" />
        <Setter Property="MilestoneTaskTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        <Polygon Fill="{Binding (pdgcc:GanttChartView.MilestoneBarFill)}" Stroke="{Binding (pdgcc:GanttChartView.MilestoneBarStroke)}" StrokeThickness="{Binding GanttChartView.MilestoneBarStrokeThickness}" Stretch="UniformToFill"
                     Points="0.5,0 1,0.5 0.5,1 0,0.5" />
                        <pdgcc:DragTaskThumb Role="UpdateStart" Visibility="{Binding GanttChartView.ThumbVisibility}" />
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ToolTipTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel>
                        <ContentControl Content="{Binding LabelOrWBS}" IsTabStop="False" />
                        <Image Source="{Binding Action.Thumbnail.Uri}"
                               Stretch="Uniform"
                               MaxWidth="{Binding Converter={converters:ImageResizerConverter}}"
                               MaxHeight="{Binding Converter={converters:ImageResizerConverter}}"/>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="DependencyLineTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        <ToolTipService.ToolTip>
                            <ToolTip Content="{Binding}" ContentTemplate="{Binding GanttChartView.PredecessorToolTipTemplate}" Visibility="{Binding GanttChartView.DependencyToolTipVisibility}" />
                        </ToolTipService.ToolTip>
                        <shapes:DependencyArrowLine Stroke="Transparent" StrokeThickness="3" Points="{Binding ComputedDependencyLinePoints}" />
                        <shapes:DependencyArrowLine StrokeThickness="{Binding GanttChartView.DependencyLineStrokeThickness}" Points="{Binding ComputedDependencyLinePoints}">
                            <shapes:DependencyArrowLine.Stroke>
                                <MultiBinding Converter="{converters:DependencyArrowLineStrokeConverter}">
                                    <Binding Path="Item.Action.ResourceId"/>
                                    <Binding Path="DependentItem.Action.ResourceId"/>
                                </MultiBinding>
                            </shapes:DependencyArrowLine.Stroke>
                            <shapes:DependencyArrowLine.StrokeDashArray>
                                <MultiBinding Converter="{converters:DependencyArrowLineStrokeDashArrayConverter}">
                                    <Binding Path="Item.Action"/>
                                    <Binding Path="DependentItem.Action"/>
                                </MultiBinding>
                            </shapes:DependencyArrowLine.StrokeDashArray>
                        </shapes:DependencyArrowLine>
                        <!--<shapes:DependencyArrowLine Stroke="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=pdgcc:GanttChartView}, Path=(pdgcc:GanttChartView.DependencyLineStroke)}" StrokeThickness="{Binding GanttChartView.DependencyLineStrokeThickness}" Points="{Binding ComputedDependencyLinePoints}" />-->
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="PredecessorToolTipTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <ContentControl Content="{Binding Item.Content}" VerticalAlignment="Center" IsTabStop="False" />
                        <TextBlock Text="-" Margin="1,0" VerticalAlignment="Center" />
                        <ContentControl Content="{Binding DependentItem.Content}" VerticalAlignment="Center" IsTabStop="False" />
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <pdgcc:TaskPresenter IsVirtuallyVisible="{Binding IsVirtuallyVisible}" ChartDependencyCreationThumbVisibility="{Binding GanttChartView.DependencyCreationThumbVisibility}" DependencyCreationThumbVisibility="{Binding DependencyCreationThumbVisibility}" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <Canvas IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="IndentationUnitSize" Value="16" />
        <Setter Property="ExpanderTemplate">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Width="16" Height="16" Background="#00FFFFFF" Padding="5,5,5,5">
                        <Path x:Name="ExpandPath" Fill="#00FFFFFF" Stroke="#FF989898">
                            <Path.Data>
                                <PathGeometry Figures="M 0 0 L 0 6 L 6 0 Z" />
                            </Path.Data>
                            <Path.RenderTransform>
                                <RotateTransform CenterX="3" CenterY="3" Angle="135" />
                            </Path.RenderTransform>
                        </Path>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="#FF1BBBFA" />
                            <Setter Property="Fill" TargetName="ExpandPath" Value="#00FFFFFF" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="RenderTransform" TargetName="ExpandPath">
                                <Setter.Value>
                                    <RotateTransform CenterX="3" CenterY="3" Angle="180" />
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="#FF595959" />
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="#FF262626" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="SplitterBorderBrush" Value="Silver" />
        <Setter Property="SplitterBorderThickness" Value="1,0" />
        <Setter Property="StandardTaskTemplate" Value="{StaticResource StandardTaskTemplate}" />
        <Setter Property="CrossAirLineStyle">
            <Setter.Value>
                <Style TargetType="{x:Type Line}">
                    <Setter Property="Stroke">
                        <Setter.Value>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#77FFA700" Offset="0.482" />
                                <GradientStop Color="#77FF7600" Offset="0.864" />
                                <GradientStop Color="#77FFB400" Offset="0.169" />
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Scales">
            <Setter.Value>
                <pdgcc:ScaleCollection>
                    <local:ZoomableScale HeaderBorderBrush="Silver" HeaderBorderThickness="0,0,1,0"
                                HeaderContentFormat="Custom" HeaderContentTemplate="{StaticResource ScaleHeaderContentTemplate}" />
                </pdgcc:ScaleCollection>
            </Setter.Value>
        </Setter>
        <Setter Property="RowStyle">
            <Setter.Value>
                <Style TargetType="{x:Type DataGridRow}" BasedOn="{StaticResource baseDataGridRowStyle}">
                    <Setter Property="MinHeight" Value="0" />
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:KGanttChartDataGrid}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="{Binding RelativeSource={RelativeSource TemplatedParent},Path=DataGridWidth, Mode=TwoWay}" MinWidth="{TemplateBinding MinDataGridWidth}" MaxWidth="{TemplateBinding MaxDataGridWidth}" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="{Binding RelativeSource={RelativeSource TemplatedParent},Path=ChartWidth, Mode=TwoWay}" MinWidth="{TemplateBinding MinChartWidth}" MaxWidth="{TemplateBinding MaxChartWidth}" />
                            </Grid.ColumnDefinitions>
                            <i:Interaction.Behaviors>
                                <behaviors:GridLayoutPersistanceBehavior />
                            </i:Interaction.Behaviors>
                            <hdc:DataTreeGrid x:Name="DataTreeGrid" Grid.Column="0" HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" BorderThickness="0" Background="Transparent" RowBackground="{TemplateBinding RowBackground}" AlternatingRowBackground="{TemplateBinding AlternatingRowBackground}" GridLinesVisibility="{TemplateBinding GridLinesVisibility}"
                                AlternationCount="{TemplateBinding AlternationCount}" CellStyle="{TemplateBinding CellStyle}" ClipboardCopyMode="{TemplateBinding ClipboardCopyMode}" ColumnHeaderStyle="{TemplateBinding ColumnHeaderStyle}" ColumnWidth="{TemplateBinding ColumnWidth}" FrozenColumnCount="{TemplateBinding FrozenColumnCount}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalGridLinesBrush="{TemplateBinding HorizontalGridLinesBrush}" VerticalGridLinesBrush="{TemplateBinding VerticalGridLinesBrush}" IsTextSearchEnabled="{TemplateBinding IsTextSearchEnabled}" IsTextSearchCaseSensitive="{TemplateBinding IsTextSearchCaseSensitive}" MaxColumnWidth="{TemplateBinding MaxColumnWidth}" MinColumnWidth="{TemplateBinding MinColumnWidth}" RowStyle="{TemplateBinding RowStyle}" RowStyleSelector="{TemplateBinding RowStyleSelector}" RowValidationErrorTemplate="{TemplateBinding RowValidationErrorTemplate}" SelectionMode="{TemplateBinding SelectionMode}" SelectedValuePath="{TemplateBinding SelectedValuePath}"
                                ColumnHeaderHeight="{TemplateBinding HeaderHeight}" RowHeight="{TemplateBinding ItemHeight}"
                                ExpanderTemplate="{TemplateBinding ExpanderTemplate}" IndentationUnitSize="{TemplateBinding IndentationUnitSize}"
                                IsReadOnly="{TemplateBinding IsReadOnly}"
                                IsAsyncPresentationEnabled="False">
                                <i:Interaction.Behaviors>
                                    <behaviors:PersistDatagridColumnWidthBehavior DataGridKey="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Name}" />
                                </i:Interaction.Behaviors>
                            </hdc:DataTreeGrid>
                            <GridSplitter Grid.Column="1" HorizontalAlignment="Center" Width="{TemplateBinding SplitterWidth}" IsEnabled="{TemplateBinding IsSplitterEnabled}" Background="{TemplateBinding SplitterBackground}" BorderBrush="{TemplateBinding SplitterBorderBrush}" BorderThickness="{TemplateBinding SplitterBorderThickness}" Style="{StaticResource verticalGridSplitterStyle}" />
                            <local:KGanttChartView x:Name="GanttChartView" Style="{StaticResource baseGanttChartViewStyle}" Grid.Column="2" Background="Transparent" BorderBrush="Transparent" BorderThickness="0" ItemTemplate="{TemplateBinding ItemTemplate}" ItemsPanel="{TemplateBinding ItemsPanel}" ScrollViewer.CanContentScroll="False"
                                     AlternationCount="{TemplateBinding AlternationCount}" IsTextSearchEnabled="{TemplateBinding IsTextSearchEnabled}" IsTextSearchCaseSensitive="{TemplateBinding IsTextSearchCaseSensitive}"
                                     HeaderHeight="{TemplateBinding HeaderHeight}" ScaleHeaderHeight="{TemplateBinding ScaleHeaderHeight}" ItemHeight="{TemplateBinding ItemHeight}" TimelinePageStart="{TemplateBinding TimelinePageStart}" TimelinePageFinish="{TemplateBinding TimelinePageFinish}" VisibleWeekStart="{TemplateBinding VisibleWeekStart}" VisibleWeekFinish="{TemplateBinding VisibleWeekFinish}" VisibleDayStart="{TemplateBinding VisibleDayStart}" VisibleDayFinish="{TemplateBinding VisibleDayFinish}" WorkingWeekStart="{TemplateBinding WorkingWeekStart}" WorkingWeekFinish="{TemplateBinding WorkingWeekFinish}" WorkingDayStart="{TemplateBinding WorkingDayStart}" WorkingDayFinish="{TemplateBinding WorkingDayFinish}" NonworkingIntervals="{TemplateBinding NonworkingIntervals}" HourWidth="{TemplateBinding HourWidth}" Scales="{TemplateBinding Scales}" UpdateScaleInterval="{TemplateBinding UpdateScaleInterval}"
                                     IsReadOnly="{TemplateBinding IsReadOnly}" IsTaskToolTipVisible="{TemplateBinding IsTaskToolTipVisible}" IsDependencyToolTipVisible="{TemplateBinding IsTaskToolTipVisible}" IsTaskCompletedEffortVisible="{TemplateBinding IsTaskCompletedEffortVisible}" IsNonworkingTimeHighlighted="{TemplateBinding IsNonworkingTimeHighlighted}" IsCurrentTimeLineVisible="{TemplateBinding IsCurrentTimeLineVisible}" AreUpdateTimelinePageButtonsVisible="{TemplateBinding AreUpdateTimelinePageButtonsVisible}" UpdateTimelinePageAmount="{TemplateBinding UpdateTimelinePageAmount}" DependencyCreationValidator="{TemplateBinding DependencyCreationValidator}" DependencyDeletionValidator="{TemplateBinding DependencyDeletionValidator}"
                                     HeaderBackground="{TemplateBinding HeaderBackground}" WorkingTimeBackground="{TemplateBinding WorkingTimeBackground}" NonworkingTimeBackground="{TemplateBinding NonworkingTimeBackground}" CurrentTimeLineStroke="{TemplateBinding CurrentTimeLineStroke}"
                                     StandardBarFill="{TemplateBinding StandardBarFill}" StandardBarStroke="{TemplateBinding StandardBarStroke}" StandardBarStrokeThickness="{TemplateBinding StandardBarStrokeThickness}" StandardBarCornerRadius="{TemplateBinding StandardBarCornerRadius}" StandardCompletedBarFill="{TemplateBinding StandardCompletedBarFill}" StandardCompletedBarStroke="{TemplateBinding StandardCompletedBarStroke}" StandardCompletedBarStrokeThickness="{TemplateBinding StandardCompletedBarStrokeThickness}" StandardCompletedBarCornerRadius="{TemplateBinding StandardCompletedBarCornerRadius}" StandardTaskTemplate="{TemplateBinding StandardTaskTemplate}"
                                     SummaryBarFill="{TemplateBinding SummaryBarFill}" SummaryBarStroke="{TemplateBinding SummaryBarStroke}" SummaryBarStrokeThickness="{TemplateBinding SummaryBarStrokeThickness}" SummaryTaskTemplate="{TemplateBinding SummaryTaskTemplate}"
                                     MilestoneBarFill="{TemplateBinding MilestoneBarFill}" MilestoneBarStroke="{TemplateBinding MilestoneBarStroke}" MilestoneBarStrokeThickness="{TemplateBinding MilestoneBarStrokeThickness}" MilestoneTaskTemplate="{TemplateBinding MilestoneTaskTemplate}"
                                     AssignmentsTemplate="{TemplateBinding AssignmentsTemplate}" DependencyLineStroke="{TemplateBinding DependencyLineStroke}" DependencyLineStrokeThickness="{TemplateBinding DependencyLineStrokeThickness}" DependencyLineTemplate="{TemplateBinding DependencyLineTemplate}" ToolTipTemplate="{TemplateBinding ToolTipTemplate}" PredecessorToolTipTemplate="{TemplateBinding PredecessorToolTipTemplate}"
                                     BarHeight="{TemplateBinding BarHeight}" CompletedBarHeight="{TemplateBinding CompletedBarHeight}" IsVirtualizing="{TemplateBinding IsVirtualizing}"
                                     DependencyDeletionContextMenuItemHeader="{TemplateBinding DependencyDeletionContextMenuItemHeader}"
                                     IsAsyncPresentationEnabled="False"
                                     DisableParentTimingCoercion="{TemplateBinding DisableParentTimingCoercion}"
                                     CurrentTimelinePosition="{Binding CurrentTimelinePosition, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                     ScrollHorizontalOffset="{Binding ScrollHorizontalOffset, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                     OriginalGainVisibility="{TemplateBinding OriginalGainVisibility}"
                                     TaskGanttClickCommand="{TemplateBinding TaskGanttClickCommand}">
                            </local:KGanttChartView>

                            <Canvas Grid.ColumnSpan="3" x:Name="PART_CrossAirCanvas" />

                            <ContentPresenter Grid.ColumnSpan="3" ContentTemplate="{StaticResource spinnerDataTemplate}" 
                                Visibility="{TemplateBinding SpinnerVisibility}"
                                Content="{k:Localize Spinner_DefaultWaitMessage}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>